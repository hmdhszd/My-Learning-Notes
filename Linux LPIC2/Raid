raid0    min 2 disks
raid1    min 2 disks
raid 10  min 4 disks

raid5    min 3 disks
raid6    min 4 disks





----------------------------------------------------------------------------------------------------------------






[root@localhost ~]# yum install mdadm -y






----------------------------------------------------------------------------------------------------------------






we have 3 partition and we wanna "RAID 5" them:




[root@localhost ~]# lsblk
NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda               8:0    0    8G  0 disk 
|-sda1            8:1    0    1G  0 part /boot
`-sda2            8:2    0    7G  0 part 
  |-centos-root 253:0    0  6.2G  0 lvm  /
  `-centos-swap 253:1    0  820M  0 lvm  [SWAP]
sdb               8:16   0  2.8G  0 disk 
|-sdb1            8:17   0  800M  0 part 
|-sdb2            8:18   0  800M  0 part 
`-sdb3            8:19   0  800M  0 part 







----------------------------------------------------------------------------------------------------------------
1)





[root@localhost ~]# mdadm -C /dev/md0 -l 5 -n 3 /dev/sdb1 /dev/sdb2 /dev/sdb3 







----------------------------------------------------------------------------------------------------------------
2)





[root@localhost ~]# mkfs.ext4 /dev/md0 







----------------------------------------------------------------------------------------------------------------
3)





[root@localhost ~]# mount /dev/md0 /MyRaid5/





----------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------






[root@localhost ~]# df -TH
Filesystem              Type      Size  Used Avail Use% Mounted on
devtmpfs                devtmpfs  508M     0  508M   0% /dev
tmpfs                   tmpfs     520M     0  520M   0% /dev/shm
tmpfs                   tmpfs     520M  7.2M  513M   2% /run
tmpfs                   tmpfs     520M     0  520M   0% /sys/fs/cgroup
/dev/mapper/centos-root xfs       6.7G  2.2G  4.6G  32% /
/dev/sda1               xfs       1.1G  143M  921M  14% /boot
tmpfs                   tmpfs     104M     0  104M   0% /run/user/0
/dev/md0                ext4      1.7G  5.0M  1.6G   1% /MyRaid5






----------------------------------------------------------------------------------------------------------------





[root@localhost ~]# lsblk
NAME            MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT
sda               8:0    0    8G  0 disk  
|-sda1            8:1    0    1G  0 part  /boot
`-sda2            8:2    0    7G  0 part  
  |-centos-root 253:0    0  6.2G  0 lvm   /
  `-centos-swap 253:1    0  820M  0 lvm   [SWAP]
sdb               8:16   0  2.8G  0 disk  
|-sdb1            8:17   0  800M  0 part  
| `-md0           9:0    0  1.6G  0 raid5 /MyRaid5
|-sdb2            8:18   0  800M  0 part  
| `-md0           9:0    0  1.6G  0 raid5 /MyRaid5
`-sdb3            8:19   0  800M  0 part  
  `-md0           9:0    0  1.6G  0 raid5 /MyRaid5
sr0              11:0    1 1024M  0 rom   






----------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------






see detail of a raid :



[root@localhost ~]# mdadm --misc --detail /dev/md0 
/dev/md0:
           Version : 1.2
     Creation Time : Fri Apr 16 03:02:52 2021
        Raid Level : raid5
        Array Size : 1634304 (1596.00 MiB 1673.53 MB)
     Used Dev Size : 817152 (798.00 MiB 836.76 MB)
      Raid Devices : 3
     Total Devices : 3
       Persistence : Superblock is persistent

       Update Time : Fri Apr 16 03:45:16 2021
             State : clean 
    Active Devices : 3
   Working Devices : 3
    Failed Devices : 0
     Spare Devices : 0

            Layout : left-symmetric
        Chunk Size : 512K

Consistency Policy : resync

              Name : localhost.localdomain:0  (local to host localhost.localdomain)
              UUID : fe215eb9:27ba8b9f:077897e7:28dcd45e
            Events : 18

    Number   Major   Minor   RaidDevice State
       0       8       17        0      active sync   /dev/sdb1
       1       8       18        1      active sync   /dev/sdb2
       3       8       19        2      active sync   /dev/sdb3










----------------------------------------------------------------------------------------------------------------






[root@localhost ~]# mdadm --monitor /dev/md0  --mail=hamidhszd@gmail.com






----------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------




Add a spare hard to raid:



[root@localhost ~]# mdadm --manage --add /dev/md0 /dev/sdb4








[root@localhost ~]# mdadm --mics --detail /dev/md0 


      Raid Devices : 3
     Total Devices : 4

    Active Devices : 3
   Working Devices : 4
    Failed Devices : 0
     Spare Devices : 1



----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












----------------------------------------------------------------------------------------------------------------












