


▶ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts


▶ helm repo update
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the "prometheus-community" chart repository
Update Complete. ⎈Happy Helming!⎈



-------------------------------------------------------------------------------------





▶ helm install my-prometheus-on-kubernetes prometheus-community/kube-prometheus-stack

NAME: my-prometheus-on-kubernetes
LAST DEPLOYED: Fri Dec 10 18:26:28 2021
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
kube-prometheus-stack has been installed. Check its status by running:
  kubectl --namespace default get pods -l "release=my-prometheus-on-kubernetes"

Visit https://github.com/prometheus-operator/kube-prometheus for instructions on how to create & configure Alertmanager and Prometheus instances using the Operator.






-------------------------------------------------------------------------------------





▶ kubectl --namespace default get all -l "release=my-prometheus-on-kubernetes"


NAME                                                             READY   STATUS    RESTARTS   AGE
pod/my-prometheus-on-kubernete-operator-dd768d7fc-wc6b7          1/1     Running   0          55s
pod/my-prometheus-on-kubernetes-prometheus-node-exporter-gs2wq   1/1     Running   0          55s


NAME                                                           TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
service/my-prometheus-on-kubernete-alertmanager                ClusterIP   10.98.153.254    <none>        9093/TCP   55s
service/my-prometheus-on-kubernete-operator                    ClusterIP   10.106.151.86    <none>        443/TCP    55s
service/my-prometheus-on-kubernete-prometheus                  ClusterIP   10.100.110.236   <none>        9090/TCP   56s
service/my-prometheus-on-kubernetes-prometheus-node-exporter   ClusterIP   10.97.249.145    <none>        9100/TCP   55s


NAME                                                                  DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
daemonset.apps/my-prometheus-on-kubernetes-prometheus-node-exporter   1         1         1       1            1           <none>          55s


NAME                                                  READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/my-prometheus-on-kubernete-operator   1/1     1            1           55s


NAME                                                            DESIRED   CURRENT   READY   AGE
replicaset.apps/my-prometheus-on-kubernete-operator-dd768d7fc   1         1         1       55s


NAME                                                                    READY   AGE
statefulset.apps/alertmanager-my-prometheus-on-kubernete-alertmanager   1/1     50s
statefulset.apps/prometheus-my-prometheus-on-kubernete-prometheus       1/1     48s






-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------





Access Grafana: 

	- on real kubernetes cluster we should use "Ingress"
	- on Minikube, we user port forwarding:


▶ kubectl get pods | grep grafana
my-prometheus-on-kubernetes-grafana-8d995c966-qstpf               2/2     Running   0          2m9s



▶ kubectl port-forward my-prometheus-on-kubernetes-grafana-8d995c966-qstpf 3000

Forwarding from 127.0.0.1:3000 -> 3000
Forwarding from [::1]:3000 -> 3000







http://localhost:3000

user: admin
pass: prom-operator






-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------






Access Prometheus:



▶ kubectl describe pod prometheus-my-prometheus-on-kubernete-prometheus-0 | grep Port
    Port:          9090/TCP




▶ kubectl port-forward prometheus-my-prometheus-on-kubernete-prometheus-0 9090




http://localhost:9090







-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------






Access AlertManager:



▶ kubectl describe pod alertmanager-my-prometheus-on-kubernete-alertmanager-0 | grep Port
    Ports:         9093/TCP, 9094/TCP, 9094/UD




http://localhost:9093






-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------













-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------










-------------------------------------------------------------------------------------








